webpackJsonp([18,23],{26:function(e,t,r){!function(t,r){e.exports=r()}(this,function(){return function(e){function t(o){if(r[o])return r[o].exports;var a=r[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(3)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["-moz-box-","-webkit-box-",""];t["default"]={props:{span:[Number,String],order:[Number,String]},methods:{buildWidth:function(e){return"number"==typeof e?e<1?e:e/12:"string"==typeof e?e.replace("px","")/this.bodyWidth:void 0}},computed:{style:function(){var e={},t="horizontal"===this.$parent.orient?"marginLeft":"marginTop";if(e[t]=this.$parent.gutter+"px",this.span)for(var o=0;o<r.length;o++)e[r[o]+"flex"]="0 0 "+100*this.buildWidth(this.span)+"%";return"undefined"!=typeof this.order&&(e.order=this.order),e}},data:function(){return{bodyWidth:document.documentElement.offsetWidth}}}},function(e,t){e.exports=" <div class=vux-flexbox-item :style=style> <slot></slot> </div> "},function(e,t,r){var o,a;o=r(1),a=r(2),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)}])})},27:function(e,t,r){!function(t,r){e.exports=r()}(this,function(){return function(e){function t(o){if(r[o])return r[o].exports;var a=r[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(4)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{gutter:{type:Number,"default":8},orient:{type:String,"default":"horizontal"},justify:String,align:String,wrap:String,direction:String},computed:{styles:function(){return{"justify-content":this.justify,"align-items":this.align,"flex-wrap":this.wrap,"flex-direction":this.direction}}}}},function(e,t){},function(e,t){e.exports=" <div class=vux-flexbox :class=\"{'vux-flex-col': orient === 'vertical', 'vux-flex-row': orient === 'horizontal'}\" :style=styles> <slot></slot> </div> "},function(e,t,r){var o,a;r(2),o=r(1),a=r(3),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)}])})},191:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),n=o(a),i=r(161),c=o(i),d=r(27),s=o(d),f=r(26),l=o(f),u=r(162),p=o(u),v=r(20),m=o(v),b=r(21),h=r(9);t["default"]={components:{Alert:c["default"],Flexbox:s["default"],FlexboxItem:l["default"],Toast:p["default"]},vuex:{getters:{user:b.user}},data:function(){return{card:{img:null,file:null,previewUrl:"",previewing:!1,uploading:!1}}},computed:{containerClass:{cached:!1,get:function(){var e="";switch(!0){case this.card.previewing:e="preparing";break;case!!this.card.previewUrl:e="preview";break;case this.card.uploading:e="pending";break;default:e=""}return e}}},methods:{showPreview:function(e){var t=this,r=new Image;r.src=e,r.onload=function(){t.card.previewUrl=e,t.card.previewing=!1,t.card.img=r}},cardOnChange:function(e,t){var r=this;this.validate(e);var o=t.target,a=new FileReader;a.addEventListener("load",function(){r.$root.hideLoadingStatus(),r.showPreview(a.result),r.$root.log({name:"上传名片"})}),o.files[0]&&(this.$root.showLoadingStatus(),this.previewing=!0,setTimeout(function(){a.readAsDataURL(o.files[0])},50))},resetForm:function(){this.card.previewUrl="",this.card.file=null,document.forms.namedItem("cardForm").reset(),this.$root.log({name:"重新上传"})},validate:function(e){this.$cardValidation[e].invalid&&this.$cardValidation[e].touched&&this.$validate(e)},onSubmit:function(e){var t=this;e.preventDefault(),this.$validate(!0,function(){if(t.$cardValidation.invalid)t.$root.showToast({text:"请先上传名片"});else{t.$root.showLoadingStatus();var e=new FormData,r=m["default"].uniqeId(8);e.append("file",m["default"].compressImage(t.card.img),r+".jpeg"),h.cards.save(e).then(function(e){return h.cards.update({content:"confirm"},{})}).then(function(e){t.$root.hideLoadingStatus(),t.$root.updateUser((0,n["default"])({},t.user,e.json().account)),t.$route.query.update?(t.$root.showToast({text:"名片修改成功!",type:"text"}),t.$router.go({name:"settings"})):(t.$root.showAlert({content:"名片上传成功，快去开启您的询价之旅吧！"}),t.$router.go({name:"enquiry"}))})["catch"](function(e){t.$root.hideLoadingStatus(),t.$root.showToast({text:e.json().error||"抱歉，服务器繁忙！"})})}})}}}},234:function(e,t,r){t=e.exports=r(7)(),t.push([e.id,".card-container[_v-1988cf5a]{text-align:center}.card-container .dotting[_v-1988cf5a]{display:inline-block;min-width:.04026rem;min-height:.04026rem;margin-right:.064412rem}.card-container .title[_v-1988cf5a]{font-size:.523349rem;margin:.805153rem auto}.card-container .card-body[_v-1988cf5a]{margin:0 auto}.card-container .card-body .business-card-preview[_v-1988cf5a]{height:4.025765rem;margin:0 auto;border:1px solid #dbe0e7;position:relative}.card-container .card-body .business-card-preview img[_v-1988cf5a]{max-width:98%;max-height:98%;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.card-container .card-body .btn-file[_v-1988cf5a]{height:3.623188rem;width:3.623188rem;line-height:3.623188rem;margin:0 auto;position:relative;background:#dbe0e7;border-radius:.080515rem;text-align:center;font-size:300px;color:#fff;overflow:hidden}.card-container .card-body .btn-file[_v-1988cf5a]:after{height:1.851852rem;width:.177134rem}.card-container .card-body .btn-file[_v-1988cf5a]:before{width:1.851852rem;height:.177134rem}.card-container .card-body .btn-file[_v-1988cf5a]:after,.card-container .card-body .btn-file[_v-1988cf5a]:before{content:'';position:absolute;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);background:#fff;border-radius:.080515rem;pointer-events:none}.card-container .card-body .btn-file[_v-1988cf5a]:active:after,.card-container .card-body .btn-file[_v-1988cf5a]:active:before{background:#4380dd}.card-container .card-body .btn-file input[_v-1988cf5a]{position:absolute;opacity:0;left:0;right:0;bottom:0;top:0;width:100%;height:100%}.card-container .card-body .business-card-preview[_v-1988cf5a],.card-container .card-body .form-footer[_v-1988cf5a]{display:none}.card-container .card-body .buttons[_v-1988cf5a]{margin-top:1.207729rem}.card-container .comment[_v-1988cf5a]{margin-top:.402576rem;line-height:1.5em;color:#adb1bc;font-size:.289855rem}.card-container.preparing .card-body .status[_v-1988cf5a],.card-container.preview .card-body .business-card-preview[_v-1988cf5a],.card-container.preview .card-body .form-footer[_v-1988cf5a]{display:block}.card-container.done .card-body .btn-file[_v-1988cf5a],.card-container.done .card-body .business-card-preview[_v-1988cf5a],.card-container.done .card-body .form-footer[_v-1988cf5a],.card-container.done .title[_v-1988cf5a],.card-container.preview .card-body .btn-file[_v-1988cf5a]{display:none}.card-container.done .success[_v-1988cf5a]{display:block}",""])},247:function(e,t,r){var o=r(234);"string"==typeof o&&(o=[[e.id,o,""]]);r(8)(o,{});o.locals&&(e.exports=o.locals)},267:function(e,t){e.exports='<div class=form-container _v-1988cf5a=""><validator name=cardValidation _v-1988cf5a=""><form name=cardForm novalidate="" @submit=onSubmit($event) _v-1988cf5a=""><div :class=containerClass class="form-group card-container" _v-1988cf5a=""><div class=card-body _v-1988cf5a=""><div class=btn-file _v-1988cf5a=""><input id=file v-model=card.file @change="cardOnChange(\'file\', $event)" type=file v-validate:file="{required: {rule: true, message: &quot;请长传名片&quot;}}" name=file _v-1988cf5a=""></div><div v-show=!card.file class=comment _v-1988cf5a=""><p _v-1988cf5a="">请尽快上传与注册手机号一致的名片信息。<br _v-1988cf5a=""> 名片信息仅用于认证审核，我们将对您的个人信息严格保密。</p></div><div class=business-card-preview _v-1988cf5a=""><img alt=名片预览 :src=card.previewUrl _v-1988cf5a=""></div></div></div><div v-show=card.file class=form-group _v-1988cf5a=""><flexbox _v-1988cf5a=""><flexbox-item _v-1988cf5a=""><button @click="$root.log({name: \'完成\'})" class=btn _v-1988cf5a="">完成</button></flexbox-item><flexbox-item _v-1988cf5a=""><button @click.prevent=resetForm() class="btn btn-gray" _v-1988cf5a="">重新上传</button></flexbox-item></flexbox></div></form></validator></div>'},288:function(e,t,r){var o,a;r(247),o=r(191),a=r(267),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)}});